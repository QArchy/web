{% extends 'main/base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block user %}
    <!-- Avatar -->
    <div class="d-inline-flex ms-auto">
        <div class="avatar mt-2 me-2" style="width: 50px; height: 50px;">
            <img src="../../static/img/default_avatar.svg" alt="">
        </div>
        <div class="d-flex mt-2 flex-md-column">
          <div class="me-3 text-white text-decoration-none">
              <h5>Username</h5>
          </div>
          <div class="d-flex">
              <a class="me-3 text-white text-decoration-none"
                  href="{% url 'settings' %}">
                  <h5>settings</h5>
              </a>
              <a class="me-3 text-white text-decoration-none"
                 href="{% url 'home' %}">
                  <h5>logout</h5>
              </a>
          </div>
        </div>
    </div>
{% endblock %}

{% block body %}
    {% if question_by_tag %}
        <div class="d-flex justify-content-center">
            <div class="text-white text-decoration-none">
                <h3>Tag: {{ question_by_tag }} </h3>
            </div>
        </div>
    {% else %}
        {% include 'main/body_head.html' %}
    {% endif %}
    {% for el in questions %}
        <!-- Question -->
        <div class="d-flex flex-md-column m-1 p-1 pb-2"
            style="border: 3px solid lightskyblue;
                     border-radius: 25px 25px 25px 25px">
            <!-- Avatar and content -->
            <div class="d-flex">
                <!-- Avatar -->
                <div class="d-flex me-2">
                    <div class="avatar">
                        <img src="../../static/img/default_avatar.svg" alt="">
                    </div>
                </div>
                <!-- Content -->
                <div class="d-flex flex-md-column">
                    <a class="text-white text-decoration-none" href="{% url 'question' el.id %}"
                    style="overflow: hidden;
                                        text-overflow: ellipsis;
                                        display: -webkit-box;
                                        -webkit-line-clamp: 1; /* number of lines to show */
                                                line-clamp: 1;
                                        -webkit-box-orient: vertical;">
                        <h3>{{ el.title }}</h3>
                    </a>
                    <div class="text-white"
                        style="overflow: hidden;
                                        text-overflow: ellipsis;
                                        display: -webkit-box;
                                        -webkit-line-clamp: 2; /* number of lines to show */
                                                line-clamp: 2;
                                        -webkit-box-orient: vertical;">
                        <p>{{ el.descr }}</p>
                    </div>
                </div>
            </div>
            <!-- Like, dislike, answers, tags -->
            <div class="d-flex p-1">
                <!-- Like, dislike -->
                <div class="d-flex me-4">
                    <div class="d-flex flex-md-column me-2">
                        <div class="ms-2 text-white">
                            <h3>{{ el.likes }}</h3>
                        </div>
                        <button class="btn text-white" type="submit"
                                style="background-color: rgb(255, 255, 255, 0.1)">
                            +
                        </button>
                    </div>
                    <div class="d-flex flex-md-column">
                        <div class="ms-2 text-white">
                            <h3>{{ el.dislikes }}</h3>
                        </div>
                        <button class="btn text-white" type="submit"
                                style="background-color: rgb(255, 255, 255, 0.1)">
                            -
                        </button>
                    </div>
                </div>
                <!-- Answers -->
                <div class="d-flex flex-md-column">
                    <div class="d-flex">
                        <a class="text-white text-decoration-none me-4" href="{% url 'question' el.id %}">
                            <h3>Answers: {{ el.answer_set.all|length }}</h3>
                        </a>
                        <!-- Tags -->
                        <div class="d-flex">
                            <div class="me-1 text-white">
                                <h3>Tags: </h3>
                            </div>
                            {% for tag in el.tag_set.all %}
                                <a class="text-white text-decoration-none  me-1" href="{% url 'question_by_tag' tag%}">
                                    <h3>{{ tag }} </h3>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    <!-- Pagination -->
    {% include 'main/paginator.html'%}
{% endblock %}
{% block p_tags %}
    {% for popular_tag in popular_tags %}
        <a class="text-white text-decoration-none  me-1" href="{% url 'question_by_tag' popular_tag.tag %}">
            <h3>{{ popular_tag.tag }}</h3>
        </a>
    {% endfor %}
{% endblock %}
{% block b_members %}
    {% for best_member in best_members %}
        <div class="p-1 me-1 text-white text-decoration-none">
            <h6>{{ best_member }}</h6>
        </div>
    {% endfor %}
{% endblock %}